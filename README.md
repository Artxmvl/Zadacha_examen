# Система интернет-магазина

Автор: Артём Талахов  
GitHub: https://github.com/Artxmvl  
Email: talakhovartem2007@gmail.com

## О проекте

Экзаменационная работа - система управления интернет-магазином на C++ и PostgreSQL. В системе можно управлять товарами, создавать заказы, оплачивать и возвращать товары, вести журнал операций.

## Роли в системе

**Администратор** - полный доступ. Управляет товарами, просматривает все заказы, меняет статусы, видит журнал операций.

**Менеджер** - работает с заказами. Может одобрять заказы, обновлять количество товара на складе.

**Покупатель** - создаёт свои заказы, оплачивает, может вернуть товар в течение 30 дней.

## Как это работает

Когда покупатель создаёт заказ, система проверяет наличие товара, вычитает его из склада, считает стоимость и логирует операцию. Заказ может быть в статусах: ожидание, завершён, отменён, возвращён.

Для оплаты есть три способа: карта, кошелёк, СБП.

## База данных

Таблицы: users, products, orders, order_items, order_status_history, audit_log.

Функции для получения информации о статусах, расходах, истории заказов.

Процедуры createOrder и updateOrderStatus с проверками и откатом при ошибках.

Триггеры автоматически обновляют дату заказа, сохраняют историю и логируют операции.

## Технологии

- Умные указатели (unique_ptr, shared_ptr) для безопасного управления памятью
- STL алгоритмы (find_if, copy_if, accumulate)
- Лямбда-функции для проверки прав и фильтрации данных
- Паттерн Strategy для выбора способа оплаты
- Наследование и полиморфизм для разных ролей пользователей

## Тестовые пользователи

| Роль | Email | Пароль |
|------|-------|--------|
| Администратор | admin@gmail.com | art1 |
| Менеджер | manager@gmail.com | art2 |
| Покупатель | customer@example.com | art3 |

## Основные возможности

- Управление товарами и ценами
- Создание и отслеживание заказов
- Несколько способов оплаты
- Возврат товаров
- Полное логирование всех операций
- История изменения статусов
- CSV отчёты
- Откат при ошибках
